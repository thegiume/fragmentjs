<section id="section-architecture" class="fragment hidden">
    <div class="mx-auto max-w-6xl px-6 pb-20 pt-16">
        <div class="flex flex-col gap-3 animate__animated animate__fadeInUp">
            <p class="text-xs uppercase tracking-[0.35em] text-white">Architecture</p>
            <h2 class="bg-linear-to-r from-white via-indigo-200 to-cyan-200 bg-clip-text text-3xl font-semibold text-transparent md:text-4xl">How FragmentJS works under the hood.</h2>
            <p class="text-lg text-white">
                The engine combines HTML includes, lightweight routing and section management deterministically.
            </p>
        </div>

        <div class="mt-10 grid gap-6 lg:grid-cols-2">
            <div class="rounded-3xl animate__animated animate__fadeInUp border border-white/10 bg-slate-900/50 p-6 backdrop-blur-xl shadow-[0_25px_80px_-45px_rgba(59,130,246,0.6)]">
                <h3 class="text-lg font-semibold text-white">Include pipeline</h3>
                <ol class="mt-4 space-y-3 text-sm text-white">
                    <li class="rounded-xl bg-slate-950/70 px-4 py-3">1. Find elements with the fragment attribute.</li>
                    <li class="rounded-xl bg-slate-950/70 px-4 py-3">2. Fetch the HTML file and replace the element.</li>
                    <li class="rounded-xl bg-slate-950/70 px-4 py-3">3. After all includes finish, the route runs.</li>
                </ol>
                <p class="mt-4 text-sm text-white">
                    In debug mode it appends <span class="text-white">?v=timestamp</span> to avoid cache.
                </p>
            </div>

            <div class="rounded-3xl animate__animated animate__fadeInUp border border-white/10 bg-slate-900/50 p-6 backdrop-blur-xl shadow-[0_25px_80px_-45px_rgba(14,165,233,0.55)]">
                <h3 class="text-lg font-semibold text-white">Routing pipeline</h3>
                <ol class="mt-4 space-y-3 text-sm text-white">
                    <li class="rounded-xl bg-slate-950/70 px-4 py-3">1. Normalize the URL (path, query, hash).</li>
                    <li class="rounded-xl bg-slate-950/70 px-4 py-3">2. Match the route and compute parameters.</li>
                    <li class="rounded-xl bg-slate-950/70 px-4 py-3">3. Call onNavigate with the payload.</li>
                    <li class="rounded-xl bg-slate-950/70 px-4 py-3">4. Hide all sections and show only the target ones.</li>
                </ol>
            </div>
        </div>

        <div class="mt-10 grid gap-6 lg:grid-cols-[0.9fr_1.1fr]">
            <div class="rounded-3xl animate__animated animate__fadeInUp border border-white/10 bg-slate-900/50 p-6 backdrop-blur-xl shadow-[0_25px_80px_-45px_rgba(99,102,241,0.55)]">
                <h3 class="text-lg font-semibold text-white">Layer stack</h3>
                <div class="mt-4 space-y-3 text-sm text-white">
                    <div class="rounded-xl bg-slate-950/70 px-4 py-3">Static UI (HTML/CSS)</div>
                    <div class="rounded-xl bg-slate-950/70 px-4 py-3">Include engine (fragment)</div>
                    <div class="rounded-xl bg-slate-950/70 px-4 py-3">Routing + history</div>
                    <div class="rounded-xl bg-slate-950/70 px-4 py-3">Data hooks (onNavigate)</div>
                </div>
            </div>
            <div class="rounded-3xl animate__animated animate__fadeInUp border border-white/10 bg-linear-to-br from-cyan-500/20 via-slate-900/70 to-slate-900/90 p-6 shadow-[0_25px_80px_-45px_rgba(14,165,233,0.6)]">
                <h3 class="text-lg font-semibold text-white">Route matching</h3>
                <div class="mt-4 grid gap-3 text-xs text-white md:grid-cols-2">
                    <div class="rounded-xl bg-slate-950/70 px-4 py-3">
                        <p class="text-white">/utenti</p>
                        <p class="text-white">section-utenti</p>
                    </div>
                    <div class="rounded-xl bg-slate-950/70 px-4 py-3">
                        <p class="text-white">/utenti/:id</p>
                        <p class="text-white">section-dettaglio-utente</p>
                    </div>
                    <div class="rounded-xl bg-slate-950/70 px-4 py-3">
                        <p class="text-white">/docs/:slug</p>
                        <p class="text-white">section-docs</p>
                    </div>
                    <div class="rounded-xl bg-slate-950/70 px-4 py-3">
                        <p class="text-white">*</p>
                        <p class="text-white">fallbackRoute</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-10 grid gap-6 lg:grid-cols-[1.05fr_0.95fr]">
            <div class="rounded-3xl animate__animated animate__fadeInUp border border-white/10 bg-slate-900/50 p-6 backdrop-blur-xl shadow-[0_25px_80px_-45px_rgba(59,130,246,0.6)]">
                <h3 class="text-lg font-semibold text-white">Slot and layout</h3>
                <p class="mt-2 text-sm text-white">
                    If a container with <span class="text-white">data-fragment-slot</span>, the sections are moved there.
                    Otherwise, they go directly into the body.
                </p>
                <pre class="mt-4 overflow-x-auto rounded-xl bg-slate-950/80 p-4 text-xs text-white"><code>&lt;main data-fragment-slot&gt;&lt;/main&gt;</code></pre>
                <p class="mt-3 text-sm text-white">Useful to keep navbar and footer fixed within a single layout.</p>
            </div>
            <div class="rounded-3xl animate__animated animate__fadeInUp border border-white/10 bg-linear-to-br from-cyan-500/20 via-slate-900/70 to-slate-900/90 p-6 shadow-[0_25px_80px_-45px_rgba(14,165,233,0.6)]">
                <h3 class="text-lg font-semibold text-white">Sections and naming</h3>
                <p class="mt-2 text-sm text-white">
                    Each route defines one or more sections. Names must match the HTML ids.
                </p>
                <pre class="mt-4 overflow-x-auto rounded-xl bg-slate-950/80 p-4 text-xs text-white"><code>{ path: "/prodotti/:id", section: "section-prodotto" }</code></pre>
                <p class="mt-3 text-sm text-white">
                    Sections are hidden with <span class="text-white">.hidden</span> and shown when the route is active.
                </p>
            </div>
        </div>

        <div class="mt-10 rounded-3xl border border-white/10 bg-slate-900/50 p-6 backdrop-blur-xl shadow-[0_25px_80px_-45px_rgba(59,130,246,0.6)]">
            <h3 class="text-lg font-semibold text-white">History listener</h3>
            <p class="mt-2 text-sm text-white">
                The <span class="text-white">popstate</span> listener calls navigateTo to support back/forward.
                This keeps navigation consistent with the URL.
            </p>
        </div>

        <div class="mt-10 grid gap-6 md:grid-cols-3">
            <div class="rounded-3xl animate__animated animate__fadeInUp border border-white/10 bg-slate-900/50 p-6 backdrop-blur-xl shadow-[0_20px_60px_-40px_rgba(99,102,241,0.55)]">
                <h3 class="text-lg font-semibold text-white">Performance</h3>
                <p class="mt-2 text-sm text-white">
                    Nessun runtime pesante: solo fetch HTML e DOM swap controllato.
                </p>
            </div>
            <div class="rounded-3xl animate__animated animate__fadeInUp border border-white/10 bg-slate-900/50 p-6 backdrop-blur-xl shadow-[0_20px_60px_-40px_rgba(56,189,248,0.55)]">
                <h3 class="text-lg font-semibold text-white">Compatibility</h3>
                <p class="mt-2 text-sm text-white">
                    Works well in legacy environments with jQuery already present.
                </p>
            </div>
            <div class="rounded-3xl animate__animated animate__fadeInUp border border-white/10 bg-slate-900/50 p-6 backdrop-blur-xl shadow-[0_20px_60px_-40px_rgba(217,70,239,0.5)]">
                <h3 class="text-lg font-semibold text-white">Control</h3>
                <p class="mt-2 text-sm text-white">
                    Layout e markup sempre sotto il tuo Control, senza astrazioni invasive.
                </p>
            </div>
        </div>
    </div>
</section>







